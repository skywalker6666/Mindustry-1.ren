{"version":3,"file":"main.es.js","sources":["../src/utils.ts","../src/topic-block-topology.tsx","../src/tools-config.ts","../src/topology-diagram.tsx","../src/topology-diagram-utils.tsx","../src/topology-drawer.tsx","../src/plugin.tsx"],"sourcesContent":["export const FOCUS_MODE_EDITING_TOPOLOGY = 'FOCUS_MODE_EDITING_TOPOLOGY';\nexport const OP_TYPE_START_EDITING_TOPOLOGY = 'OP_TYPE_START_EDITING_TOPOLOGY';\nexport const BLOCK_TYPE_TOPOLOGY = 'TOPOLOGY';\nexport const REF_KEY_TOPOLOGY_DIAGRAM = 'TOPOLOGY_DIAGRAM';\nexport const REF_KEY_TOPOLOGY_DIAGRAM_UTIL = 'TOPOLOGY_DIAGRAM_UTIL';\n","import { iconClassName, TopicBlockIcon } from '@blink-mind/renderer-react';\nimport * as React from 'react';\n\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  FOCUS_MODE_EDITING_TOPOLOGY,\n  OP_TYPE_START_EDITING_TOPOLOGY\n} from './utils';\n\nexport function TopicBlockTopology(props) {\n  const { controller, model, topicKey } = props;\n  const onClick = e => {\n    e.stopPropagation();\n    controller.run('operation', {\n      ...props,\n      opType: OP_TYPE_START_EDITING_TOPOLOGY\n    });\n  };\n  const isEditing =\n    model.focusKey === topicKey &&\n    model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY;\n\n  const { block } = model.getTopic(topicKey).getBlock(BLOCK_TYPE_TOPOLOGY);\n\n  if (!isEditing && !block) return null;\n  const iconProps = {\n    className: iconClassName('topology'),\n    onClick,\n    tabIndex: -1\n  };\n\n  return <TopicBlockIcon {...iconProps} />;\n}\n","export const ToolsConfig = [\n  {\n    group: 'Basic',\n    children: [\n      {\n        name: 'rectangle',\n        icon: 'icon-rect',\n        data: {\n          text: 'Topology',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'rectangle',\n          icon: '\\ue64d',\n          iconFamily: 'topology',\n          iconColor: '#2f54eb'\n        }\n      },\n      {\n        name: 'rectangle',\n        icon: 'icon-rectangle',\n        data: {\n          text: 'rectangle',\n          rect: {\n            width: 200,\n            height: 50\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          borderRadius: 0.1,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'circle',\n        icon: 'icon-circle',\n        data: {\n          text: 'circle',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'circle',\n          textMaxLine: 1\n        }\n      },\n      {\n        name: 'triangle',\n        icon: 'icon-triangle',\n        data: {\n          text: 'triangle',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'triangle'\n        }\n      },\n      {\n        name: 'diamond',\n        icon: 'icon-diamond',\n        data: {\n          text: 'diamond',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'pentagon',\n        icon: 'icon-pentagon',\n        data: {\n          text: 'pentagon',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'pentagon'\n        }\n      },\n      {\n        name: 'hexagon',\n        icon: 'icon-hexagon',\n        data: {\n          text: 'hexagon',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'hexagon'\n        }\n      },\n      {\n        name: 'pentagram',\n        icon: 'icon-pentagram',\n        data: {\n          text: 'pentagram',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'pentagram'\n        }\n      },\n      {\n        name: 'left arrow',\n        icon: 'icon-arrow-left',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'leftArrow'\n        }\n      },\n      {\n        name: 'right arrow',\n        icon: 'icon-arrow-right',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'rightArrow'\n        }\n      },\n      {\n        name: 'bidirectional arrow',\n        icon: 'icon-twoway-arrow',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'twowayArrow'\n        }\n      },\n      {\n        name: 'line',\n        icon: 'icon-line',\n        data: {\n          text: 'line',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'line'\n        }\n      },\n      {\n        name: 'cloud',\n        icon: 'icon-cloud',\n        data: {\n          text: 'cloud',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'cloud'\n        }\n      },\n      {\n        name: 'message',\n        icon: 'icon-msg',\n        data: {\n          text: 'message',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'message'\n        }\n      },\n      {\n        name: 'file',\n        icon: 'icon-file',\n        data: {\n          text: 'file',\n          rect: {\n            width: 80,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'file'\n        }\n      },\n      {\n        name: 'text',\n        icon: 'icon-text',\n        data: {\n          text: 'text',\n          rect: {\n            width: 160,\n            height: 30\n          },\n          name: 'text'\n        }\n      },\n      {\n        name: 'image',\n        icon: 'icon-image',\n        data: {\n          text: '',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'image',\n          image: '/assets/img/logo.png'\n        }\n      },\n      {\n        name: 'cube',\n        icon: 'icon-cube',\n        data: {\n          rect: {\n            width: 50,\n            height: 70\n          },\n          is3D: true,\n          z: 10,\n          zRotate: 15,\n          fillStyle: '#ddd',\n          name: 'cube',\n          icon: '\\ue63c',\n          iconFamily: 'topology',\n          iconColor: '#777',\n          iconSize: 30\n        }\n      },\n      {\n        name: 'people',\n        icon: 'icon-people',\n        data: {\n          rect: {\n            width: 70,\n            height: 100\n          },\n          name: 'people'\n        }\n      },\n      {\n        name: 'multi media',\n        icon: 'icon-pc',\n        data: {\n          text: 'multi media',\n          rect: {\n            width: 200,\n            height: 200\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          // strokeStyle: 'transparent',\n          name: 'div'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Flow Graph',\n    children: [\n      {\n        name: 'start/end',\n        icon: 'icon-flow-start',\n        data: {\n          text: 'start',\n          rect: {\n            width: 120,\n            height: 40\n          },\n          borderRadius: 0.5,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'flow',\n        icon: 'icon-rectangle',\n        data: {\n          text: 'flow',\n          rect: {\n            width: 120,\n            height: 40\n          },\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'judgement',\n        icon: 'icon-diamond',\n        data: {\n          text: 'judgement',\n          rect: {\n            width: 120,\n            height: 60\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'data',\n        icon: 'icon-flow-data',\n        data: {\n          text: 'data',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowData'\n        }\n      },\n      {\n        name: 'prepare',\n        icon: 'icon-flow-ready',\n        data: {\n          text: 'prepare',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'hexagon'\n        }\n      },\n      {\n        name: 'sub flow',\n        icon: 'icon-flow-subprocess',\n        data: {\n          text: 'sub flow',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowSubprocess'\n        }\n      },\n      {\n        name: 'database',\n        icon: 'icon-db',\n        data: {\n          text: 'database',\n          rect: {\n            width: 80,\n            height: 120\n          },\n          name: 'flowDb'\n        }\n      },\n      {\n        name: 'document',\n        icon: 'icon-flow-document',\n        data: {\n          text: 'document',\n          rect: {\n            width: 120,\n            height: 100\n          },\n          name: 'flowDocument'\n        }\n      },\n      {\n        name: 'internal storage',\n        icon: 'icon-internal-storage',\n        data: {\n          text: 'internal storage',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowInternalStorage'\n        }\n      },\n      {\n        name: 'external storage',\n        icon: 'icon-extern-storage',\n        data: {\n          text: 'external storage',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowExternStorage'\n        }\n      },\n      {\n        name: 'queue',\n        icon: 'icon-flow-queue',\n        data: {\n          text: 'queue',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'flowQueue'\n        }\n      },\n      {\n        name: 'input manually',\n        icon: 'icon-flow-manually',\n        data: {\n          text: 'input manually',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowManually'\n        }\n      },\n      {\n        name: 'display',\n        icon: 'icon-flow-display',\n        data: {\n          text: 'display',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowDisplay'\n        }\n      },\n      {\n        name: 'parallel',\n        icon: 'icon-flow-parallel',\n        data: {\n          text: 'parallel',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowParallel'\n        }\n      },\n      {\n        name: 'comment',\n        icon: 'icon-flow-comment',\n        data: {\n          text: 'comment',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'flowComment'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Activity Diagram',\n    children: [\n      {\n        name: 'start',\n        icon: 'icon-inital',\n        data: {\n          text: '',\n          rect: {\n            width: 30,\n            height: 30\n          },\n          name: 'circle',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      },\n      {\n        name: 'end',\n        icon: 'icon-final',\n        data: {\n          text: '',\n          rect: {\n            width: 30,\n            height: 30\n          },\n          name: 'activityFinal'\n        }\n      },\n      {\n        name: 'action',\n        icon: 'icon-action',\n        data: {\n          text: 'action',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          borderRadius: 0.25,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'decision/merge',\n        icon: 'icon-diamond',\n        data: {\n          text: '决策',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'vertical swimming lane',\n        icon: 'icon-swimlane-v',\n        data: {\n          text: 'vertical swimming lane',\n          rect: {\n            width: 200,\n            height: 500\n          },\n          name: 'swimlaneV'\n        }\n      },\n      {\n        name: 'horizontal swimming lane',\n        icon: 'icon-swimlane-h',\n        data: {\n          text: 'horizontal swimming lane',\n          rect: {\n            width: 500,\n            height: 200\n          },\n          name: 'swimlaneH'\n        }\n      },\n      {\n        name: 'vertical fork/merge',\n        icon: 'icon-fork-v',\n        data: {\n          text: '',\n          rect: {\n            width: 10,\n            height: 150\n          },\n          name: 'forkV',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      },\n      {\n        name: 'horizontal fork/merge',\n        icon: 'icon-fork',\n        data: {\n          text: '',\n          rect: {\n            width: 150,\n            height: 10\n          },\n          name: 'forkH',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Sequence Diagram && Class Diagram',\n    children: [\n      {\n        name: 'lifeline',\n        icon: 'icon-lifeline',\n        data: {\n          text: 'lifeline',\n          rect: {\n            width: 150,\n            height: 400\n          },\n          name: 'lifeline'\n        }\n      },\n      {\n        name: 'activation',\n        icon: 'icon-focus',\n        data: {\n          text: '',\n          rect: {\n            width: 12,\n            height: 200\n          },\n          name: 'sequenceFocus'\n        }\n      },\n      {\n        name: 'simple class',\n        icon: 'icon-simple-class',\n        data: {\n          text: 'Topolgoy',\n          rect: {\n            width: 270,\n            height: 200\n          },\n          paddingTop: 40,\n          font: {\n            fontFamily: 'Arial',\n            color: '#222',\n            fontWeight: 'bold'\n          },\n          fillStyle: '#ffffba',\n          strokeStyle: '#7e1212',\n          name: 'simpleClass',\n          children: [\n            {\n              text: '- name: string\\n+ setName(name: string): void',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: 0,\n                width: '100%',\n                height: '100%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            }\n          ]\n        }\n      },\n      {\n        name: 'class',\n        icon: 'icon-class',\n        data: {\n          text: 'Topolgoy',\n          rect: {\n            width: 270,\n            height: 200\n          },\n          paddingTop: 40,\n          font: {\n            fontFamily: 'Arial',\n            color: '#222',\n            fontWeight: 'bold'\n          },\n          fillStyle: '#ffffba',\n          strokeStyle: '#7e1212',\n          name: 'interfaceClass',\n          children: [\n            {\n              text: '- name: string',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: 0,\n                width: '100%',\n                height: '50%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            },\n            {\n              text: '+ setName(name: string): void',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: '50%',\n                width: '100%',\n                height: '50%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            }\n          ]\n        }\n      }\n    ]\n  }\n];\n","import { BaseWidget } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { Topology } from 'topology-core';\nimport { registerNode } from 'topology-core/middles';\nimport { Options } from 'topology-core/options';\n\nimport {\n  flowComment,\n  flowCommentAnchors,\n  flowData,\n  flowDataAnchors,\n  flowDataIconRect,\n  flowDataTextRect,\n  flowDb,\n  flowDbIconRect,\n  flowDbTextRect,\n  flowDisplay,\n  flowDisplayAnchors,\n  flowDisplayIconRect,\n  flowDisplayTextRect,\n  flowDocument,\n  flowDocumentAnchors,\n  flowDocumentIconRect,\n  flowDocumentTextRect,\n  flowExternStorage,\n  flowExternStorageAnchors,\n  flowExternStorageIconRect,\n  flowExternStorageTextRect,\n  flowInternalStorage,\n  flowInternalStorageIconRect,\n  flowInternalStorageTextRect,\n  flowManually,\n  flowManuallyAnchors,\n  flowManuallyIconRect,\n  flowManuallyTextRect,\n  flowParallel,\n  flowParallelAnchors,\n  flowQueue,\n  flowQueueIconRect,\n  flowQueueTextRect,\n  flowSubprocess,\n  flowSubprocessIconRect,\n  flowSubprocessTextRect\n} from 'topology-flow-diagram';\nimport { ToolsConfig } from './tools-config';\n\nimport '@blink-mind/icons/iconfont/topology';\nimport styled from 'styled-components';\nimport {\n  activityFinal,\n  activityFinalIconRect,\n  activityFinalTextRect,\n  fork,\n  forkHAnchors,\n  forkIconRect,\n  forkTextRect,\n  forkVAnchors,\n  swimlaneH,\n  swimlaneHIconRect,\n  swimlaneHTextRect,\n  swimlaneV,\n  swimlaneVIconRect,\n  swimlaneVTextRect\n} from 'topology-activity-diagram';\nimport {\n  interfaceClass,\n  interfaceClassIconRect,\n  interfaceClassTextRect,\n  simpleClass,\n  simpleClassIconRect,\n  simpleClassTextRect\n} from 'topology-class-diagram';\nimport {\n  lifeline,\n  lifelineAnchors,\n  lifelineIconRect,\n  lifelineTextRect,\n  sequenceFocus,\n  sequenceFocusAnchors,\n  sequenceFocusIconRect,\n  sequenceFocusTextRect\n} from 'topology-sequence-diagram';\nimport { TopologyDiagramUtils } from './topology-diagram-utils';\nimport { BLOCK_TYPE_TOPOLOGY, REF_KEY_TOPOLOGY_DIAGRAM_UTIL } from './utils';\n\nconst Root = styled.div`\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Canvas = styled.div`\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n`;\n\nconst Tools = styled.div`\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n`;\n\nconst ToolTitle = styled.div`\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n`;\n\nconst ToolbarButtons = styled.div`\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n`;\n\nexport class TopologyDiagram extends BaseWidget {\n  state = {\n    id: '',\n    data: null,\n    toolsConfig: ToolsConfig,\n    iconfont: { fontSize: '0.24rem' }\n  };\n  topology: Topology;\n\n  canvasOptions: Options = {};\n\n  canvasRegister() {\n    registerNode(\n      'flowData',\n      flowData,\n      flowDataAnchors,\n      flowDataIconRect,\n      flowDataTextRect\n    );\n    registerNode(\n      'flowSubprocess',\n      flowSubprocess,\n      null,\n      flowSubprocessIconRect,\n      flowSubprocessTextRect\n    );\n    registerNode('flowDb', flowDb, null, flowDbIconRect, flowDbTextRect);\n    registerNode(\n      'flowDocument',\n      flowDocument,\n      flowDocumentAnchors,\n      flowDocumentIconRect,\n      flowDocumentTextRect\n    );\n    registerNode(\n      'flowInternalStorage',\n      flowInternalStorage,\n      null,\n      flowInternalStorageIconRect,\n      flowInternalStorageTextRect\n    );\n    registerNode(\n      'flowExternStorage',\n      flowExternStorage,\n      flowExternStorageAnchors,\n      flowExternStorageIconRect,\n      flowExternStorageTextRect\n    );\n    registerNode(\n      'flowQueue',\n      flowQueue,\n      null,\n      flowQueueIconRect,\n      flowQueueTextRect\n    );\n    registerNode(\n      'flowManually',\n      flowManually,\n      flowManuallyAnchors,\n      flowManuallyIconRect,\n      flowManuallyTextRect\n    );\n    registerNode(\n      'flowDisplay',\n      flowDisplay,\n      flowDisplayAnchors,\n      flowDisplayIconRect,\n      flowDisplayTextRect\n    );\n    registerNode('flowParallel', flowParallel, flowParallelAnchors, null, null);\n    registerNode('flowComment', flowComment, flowCommentAnchors, null, null);\n\n    // activity\n    registerNode(\n      'activityFinal',\n      activityFinal,\n      null,\n      activityFinalIconRect,\n      activityFinalTextRect\n    );\n    registerNode(\n      'swimlaneV',\n      swimlaneV,\n      null,\n      swimlaneVIconRect,\n      swimlaneVTextRect\n    );\n    registerNode(\n      'swimlaneH',\n      swimlaneH,\n      null,\n      swimlaneHIconRect,\n      swimlaneHTextRect\n    );\n    registerNode('forkH', fork, forkHAnchors, forkIconRect, forkTextRect);\n    registerNode('forkV', fork, forkVAnchors, forkIconRect, forkTextRect);\n\n    // class\n    registerNode(\n      'simpleClass',\n      simpleClass,\n      null,\n      simpleClassIconRect,\n      simpleClassTextRect\n    );\n    registerNode(\n      'interfaceClass',\n      interfaceClass,\n      null,\n      interfaceClassIconRect,\n      interfaceClassTextRect\n    );\n\n    // sequence\n    registerNode(\n      'lifeline',\n      lifeline,\n      lifelineAnchors,\n      lifelineIconRect,\n      lifelineTextRect\n    );\n    registerNode(\n      'sequenceFocus',\n      sequenceFocus,\n      sequenceFocusAnchors,\n      sequenceFocusIconRect,\n      sequenceFocusTextRect\n    );\n  }\n\n  handleContextMenu = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  onMessage = (event, data) => {\n    const { getRef } = this.props;\n    const diagramUtil: TopologyDiagramUtils = getRef(\n      REF_KEY_TOPOLOGY_DIAGRAM_UTIL\n    );\n    switch (event) {\n      case 'resize':\n      case 'scale':\n      case 'locked':\n        if (this.topology && diagramUtil) {\n          diagramUtil.setCanvasData(this.topology.data);\n        }\n        break;\n    }\n  };\n\n  componentDidMount(): void {\n    this.canvasRegister();\n    this.canvasOptions.on = this.onMessage;\n    this.topology = new Topology('topology-canvas', this.canvasOptions);\n    this.openData();\n  }\n\n  componentDidUpdate(): void {\n    this.openData();\n  }\n\n  openData() {\n    const { model, topicKey } = this.props;\n    const topic = model.getTopic(topicKey);\n    const { block } = topic.getBlock(BLOCK_TYPE_TOPOLOGY);\n    if (block && block.data && block.data !== '') {\n      this.setState({\n        data: block.data\n      });\n      this.topology.open(block.data);\n    }\n  }\n\n  onDrag(event: React.DragEvent<HTMLAnchorElement>, node: any) {\n    event.dataTransfer.setData('Text', JSON.stringify(node.data));\n  }\n\n  renderTools() {\n    return (\n      <Tools>\n        {this.state.toolsConfig.map((item, index) => {\n          return (\n            <div key={index}>\n              <ToolTitle>{item.group}</ToolTitle>\n              <ToolbarButtons>\n                {//TODO\n                //@ts-ignore\n                item.children.map((btn, i) => {\n                  return (\n                    <a\n                      key={i}\n                      title={btn.name}\n                      draggable={true}\n                      onDragStart={ev => {\n                        this.onDrag(ev, btn);\n                      }}\n                    >\n                      <i\n                        className={'iconfont ' + btn.icon}\n                        style={this.state.iconfont}\n                      />\n                    </a>\n                  );\n                })}\n              </ToolbarButtons>\n            </div>\n          );\n        })}\n      </Tools>\n    );\n  }\n\n  render() {\n    return (\n      <Root>\n        {this.renderTools()}\n        <Canvas id=\"topology-canvas\" onContextMenu={this.handleContextMenu} />\n      </Root>\n    );\n  }\n}\n","import { OpType } from '@blink-mind/core';\nimport { BaseProps, Btn, Icon, IconName } from '@blink-mind/renderer-react';\nimport { Alert, Classes, Position, Tooltip } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { Topology } from 'topology-core';\nimport { BLOCK_TYPE_TOPOLOGY, REF_KEY_TOPOLOGY_DIAGRAM } from './utils';\n\nconst Root = styled.div`\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n`;\n\nconst Item_ = styled(Btn)`\n  margin: 10px;\n`;\n\nconst Item = props => {\n  return (\n    <Tooltip\n      content={props.tooltip}\n      position={Position.TOP}\n      className={Classes.ICON}\n    >\n      <Item_ onClick={props.onClick}>{props.children}</Item_>\n    </Tooltip>\n  );\n};\n\nconst ZoomFactorSpan = styled.span`\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n`;\ninterface State {\n  deleteConfirm: boolean;\n  canvasData: any;\n}\n\nexport class TopologyDiagramUtils extends React.Component<BaseProps, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteConfirm: false,\n      canvasData: null\n    };\n  }\n\n  setCanvasData = canvasData => {\n    this.setState({ canvasData });\n  };\n\n  getTopology(): Topology {\n    const { getRef } = this.props;\n    return getRef(REF_KEY_TOPOLOGY_DIAGRAM).topology;\n  }\n\n  onClickResetZoom = e => {\n    const topology = this.getTopology();\n    topology.scaleTo(1);\n  };\n\n  render() {\n    const props = this.props;\n    const { controller } = props;\n\n    const onClickDelete = e => {\n      this.setState({ deleteConfirm: true });\n    };\n    const deleteAlertProps = {\n      isOpen: this.state.deleteConfirm,\n      cancelButtonText: 'cancel',\n      onConfirm: e => {\n        controller.run('operation', {\n          ...props,\n          opType: OpType.DELETE_TOPIC_BLOCK,\n          blockType: BLOCK_TYPE_TOPOLOGY\n        });\n      },\n      onCancel: e => {\n        this.setState({ deleteConfirm: false });\n      },\n      onClose: e => {\n        this.setState({ deleteConfirm: false });\n      }\n    };\n    const { canvasData } = this.state;\n    const scale = canvasData ? canvasData.scale : 1;\n    return (\n      <Root>\n        <Item onClick={this.onClickResetZoom} tooltip=\"reset zoom\">\n          <ZoomFactorSpan>{`zoom:${Math.floor(scale * 100)}%`}</ZoomFactorSpan>\n        </Item>\n        <Item onClick={onClickDelete} tooltip=\"delete this diagram\">\n          {Icon(IconName.TRASH)}\n        </Item>\n        <Alert {...deleteAlertProps}>\n          <p>Are you confirm to delete this topology diagram?</p>\n        </Alert>\n      </Root>\n    );\n  }\n}\n","import { cancelEvent, Icon } from '@blink-mind/renderer-react';\nimport { Drawer } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { TopologyDiagram } from './topology-diagram';\n\nimport { FocusMode, OpType } from '@blink-mind/core';\nimport styled from 'styled-components';\nimport { TopologyDiagramUtils } from './topology-diagram-utils';\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  REF_KEY_TOPOLOGY_DIAGRAM,\n  REF_KEY_TOPOLOGY_DIAGRAM_UTIL\n} from './utils';\n\nconst DiagramWrapper = styled.div`\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n`;\n\nconst Title = styled.span`\n  padding: 0px 20px;\n`;\n\nexport function TopologyDrawer(props) {\n  const { controller, topicKey, getRef, saveRef } = props;\n  const onDiagramClose = e => {\n    e.stopPropagation();\n    // const key = `topic-topology-data-${topicKey}`;\n    // const topologyData = controller.run('deleteTempValue', { key });\n\n    const diagram: TopologyDiagram = getRef(REF_KEY_TOPOLOGY_DIAGRAM);\n    const topologyData = diagram.topology.data;\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_TOPIC_BLOCK,\n      topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: topologyData,\n      focusMode: FocusMode.NORMAL\n    });\n  };\n  const diagramProps = {\n    ...props,\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM)\n  };\n  const utilProps = {\n    ...props,\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM_UTIL)\n  };\n  return (\n    <Drawer\n      title={<Title>Topology Diagram Editor</Title>}\n      icon={Icon('topology')}\n      isOpen\n      hasBackdrop\n      backdropClassName=\"backdrop\"\n      backdropProps={{ onMouseDown: cancelEvent }}\n      canOutsideClickClose={false}\n      isCloseButtonShown={true}\n      onClose={onDiagramClose}\n      size=\"100%\"\n    >\n      <DiagramWrapper onClick={cancelEvent} onDoubleClick={cancelEvent}>\n        <TopologyDiagram {...diagramProps} />\n        <TopologyDiagramUtils {...utilProps} />\n      </DiagramWrapper>\n    </Drawer>\n  );\n}\n","import { BaseModifierArg, ModelModifier } from '@blink-mind/core';\nimport { Icon } from '@blink-mind/renderer-react';\nimport { MenuDivider, MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { TopicBlockTopology } from './topic-block-topology';\nimport { TopologyDrawer } from './topology-drawer';\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  FOCUS_MODE_EDITING_TOPOLOGY,\n  OP_TYPE_START_EDITING_TOPOLOGY\n} from './utils';\n\nfunction startEditingTopology({ model, topicKey }: BaseModifierArg) {\n  const topic = model.getTopic(topicKey);\n  const { block } = topic.getBlock(BLOCK_TYPE_TOPOLOGY);\n  if (block == null || block.data == null) {\n    model = ModelModifier.setBlockData({\n      model,\n      topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: ''\n    });\n  }\n  model = ModelModifier.focusTopic({\n    model,\n    topicKey,\n    focusMode: FOCUS_MODE_EDITING_TOPOLOGY\n  });\n  return model;\n}\n\nexport default function TopologyDiagramPlugin() {\n  return {\n    renderTopicBlock(props, next) {\n      const { controller, block } = props;\n      if (block.type === BLOCK_TYPE_TOPOLOGY) {\n        return controller.run('renderTopicBlockTopology', props);\n      }\n      return next();\n    },\n\n    renderTopicBlockTopology(props) {\n      return <TopicBlockTopology {...props} />;\n    },\n\n    renderDrawer(props, next) {\n      const { model } = props;\n      if (model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY) {\n        const topoProps = {\n          ...props,\n          topicKey: model.focusKey,\n          key: 'topology-drawer'\n        };\n        return <TopologyDrawer {...topoProps} />;\n      }\n      return next();\n    },\n\n    customizeTopicContextMenu(props, next) {\n      const { controller } = props;\n      function editTopology(e) {\n        controller.run('operation', {\n          ...props,\n          opType: OP_TYPE_START_EDITING_TOPOLOGY\n        });\n      }\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            icon={Icon('topology')}\n            text=\"Edit Topology Diagram\"\n            onClick={editTopology}\n          />\n        </>\n      );\n    },\n\n    getOpMap(props, next) {\n      const opMap = next();\n      opMap.set(OP_TYPE_START_EDITING_TOPOLOGY, startEditingTopology);\n      return opMap;\n    }\n  };\n}\n"],"names":["React.createElement","Root","React.Component"],"mappings":"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"}