{"version":3,"file":"main.js","sources":["../src/plugins/core.ts","../src/controller.ts","../src/types/index.ts","../src/utils/index.ts","../src/models/block.ts","../src/models/topic.ts","../src/models/utils/index.ts","../src/models/modifiers/modifiers.ts","../src/configs/theme/types.ts","../src/configs/theme/default-theme.ts","../src/models/config.ts","../src/models/model.ts"],"sourcesContent":["export function CorePlugin(options: any = {}) {\n  const { plugins = [] } = options;\n  return [...plugins];\n}\n","import debug from 'debug';\nimport memoizeOne from 'memoize-one';\nimport warning from 'tiny-warning';\nimport { IControllerOption } from './interfaces';\nimport { Model } from './models';\nimport { CorePlugin } from './plugins/core';\nimport { OnChangeFunction } from './types';\n\nconst log = debug('core:controller');\n\nfunction registerPlugin(controller: Controller, plugin: any) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(p => registerPlugin(controller, p));\n    return;\n  }\n\n  if (plugin == null) {\n    return;\n  }\n\n  for (const key in plugin) {\n    const fn = plugin[key];\n    controller.middleware[key] = controller.middleware[key] || [];\n    controller.middleware[key].push(fn);\n  }\n}\n\n// modified from koa-compose\nfunction compose(middleware) {\n  if (!Array.isArray(middleware))\n    throw new TypeError('Middleware stack must be an array!');\n  for (const fn of middleware) {\n    if (typeof fn !== 'function')\n      throw new TypeError('Middleware must be composed of functions!');\n  }\n\n  return function(context, next) {\n    // last called middleware #\n    let index = -1;\n    return dispatch(0);\n    function dispatch(i) {\n      if (i <= index) throw new Error('next() called multiple times');\n      index = i;\n      let fn = middleware[i];\n      if (i === middleware.length) fn = next;\n      if (!fn) return null;\n      try {\n        return fn(context, dispatch.bind(null, i + 1));\n      } catch (err) {\n        throw err;\n      }\n    }\n  };\n}\n\nexport class Controller {\n  middleware: Map<string, Function[]>;\n  private readonly onChange: OnChangeFunction;\n  public readOnly: boolean;\n  public currentModel: Model;\n\n  constructor(options: IControllerOption = {}) {\n    const { plugins = [], onChange, readOnly } = options;\n    this.readOnly = readOnly;\n    this.onChange = onChange;\n    this.middleware = new Map();\n    const corePlugin = CorePlugin({ plugins });\n    registerPlugin(this, corePlugin);\n  }\n\n  run(key: string, ...args: any[]) {\n    const { middleware } = this;\n    const fns = middleware[key] || [];\n    warning(fns.length !== 0, `the middleware function ${key} is not found!`);\n    const composedFn = memoizeOne(compose)(fns);\n    // @ts-ignore\n    return composedFn(...args);\n  }\n\n  getValue(propKey: string, arg?) {\n    return this.run('getValue', { ...arg, propKey });\n  }\n\n  change(model: Model, callback?: () => void) {\n    this.onChange(model, callback);\n    this.currentModel = model;\n  }\n}\n","import { Model } from '@blink-mind/core';\n\nexport type KeyType = string;\n\nexport type KeyPath = KeyType[];\n\nexport const TopicDirection = {\n  LEFT: 'L', // 从右向左\n  RIGHT: 'R', // 从左向右\n  BOTTOM: 'B', // 从上往下\n  MAIN: 'M' // root\n};\n\nexport enum DiagramLayoutType {\n  LEFT_TO_RIGHT,\n  RIGHT_TO_LEFT,\n  LEFT_AND_RIGHT,\n  TOP_TO_BOTTOM\n}\n\nexport const TopicVisualLevel = {\n  ROOT: 0,\n  PRIMARY: 1,\n  NORMAL: 2\n};\n\nexport const BlockType = {\n  CONTENT: 'CONTENT',\n  DESC: 'DESC'\n};\n\nexport const FocusMode = {\n  NORMAL: 'NORMAL',\n  EDITING_CONTENT: 'EDITING_CONTENT',\n  EDITING_DESC: 'EDITING_DESC',\n  SHOW_POPUP: 'SHOW_POPUP',\n  DRAGGING: 'DRAGGING'\n};\n\nexport type OnChangeFunction = (model: Model, callback?: () => void) => void;\n\nexport const TopicRelationship = {\n  ANCESTOR: 'ANCESTOR',\n  DESCENDANT: 'DESCENDANT',\n  SIBLING: 'SIBLING',\n  NONE: 'NONE'\n};\n\nexport const OpType = {\n  TOGGLE_COLLAPSE: 'TOGGLE_COLLAPSE',\n  COLLAPSE_ALL: 'COLLAPSE_ALL',\n  EXPAND_ALL: 'EXPAND_ALL',\n  EXPAND_TO: 'EXPAND_TO',\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  FOCUS_TOPIC: 'FOCUS_TOPIC',\n  SET_FOCUS_MODE: 'SET_FOCUS_MODE',\n  SET_STYLE: 'SET_STYLE',\n  SET_THEME: 'SET_THEME',\n  SET_TOPIC_BLOCK: 'SET_TOPIC_BLOCK',\n  DELETE_TOPIC_BLOCK: 'DELETE_TOPIC_BLOCK',\n  // SET_TOPIC_CONTENT: 'SET_TOPIC_CONTENT',\n  // SET_TOPIC_DESC: 'SET_TOPIC_DESC',\n  START_EDITING_CONTENT: 'START_EDITING_CONTENT',\n  START_EDITING_DESC: 'START_EDITING_DESC',\n  DRAG_AND_DROP: 'DRAG_AND_DROP',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT'\n};\n","export function createKey() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = (Math.random() * 16) | 0,\n      v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","import { List, Record } from 'immutable';\nimport { KeyType } from '../types';\n\ntype BlockRecordType = {\n  type: string;\n  key?: KeyType;\n  data: any;\n};\n\nconst defaultBlockRecord: BlockRecordType = {\n  type: null,\n  key: null,\n  data: null\n};\n\nexport class Block extends Record(defaultBlockRecord) {\n  get data() {\n    return this.get('data');\n  }\n\n  get type() {\n    return this.get('type');\n  }\n\n  static create(obj: BlockRecordType): Block {\n    return new Block(obj);\n  }\n\n  static createList(obj: any): List<Block> {\n    if (List.isList(obj) || Array.isArray(obj)) {\n      // @ts-ignore\n      return List(obj.map(Block.create));\n    }\n    throw new Error(\n      `Block.createList only accepts Array or List, but you passed it: ${obj}`\n    );\n  }\n}\n","import { List, Record } from 'immutable';\nimport { BlockType, KeyType } from '../types';\nimport { Block } from './block';\nimport { Relation } from './relation';\n\ntype TopicRecordType = {\n  key: KeyType;\n  parentKey?: KeyType;\n  collapse?: boolean;\n  subKeys?: List<KeyType>;\n  blocks?: List<Block>;\n  relations?: List<Relation>;\n  style?: string;\n};\n\ntype CreateTopicArg = {\n  key: KeyType;\n  parentKey?: KeyType;\n  collapse?: boolean;\n  content?: any;\n  subKeys?: List<KeyType> | KeyType[];\n  style?: string;\n};\n\nconst defaultTopicRecord: TopicRecordType = {\n  key: null,\n  parentKey: null,\n  collapse: false,\n  subKeys: null,\n  blocks: null,\n  relations: null,\n  style: null\n};\n\nexport class Topic extends Record(defaultTopicRecord) {\n  get key() {\n    return this.get('key');\n  }\n  get parentKey() {\n    return this.get('parentKey');\n  }\n  get collapse() {\n    return this.get('collapse');\n  }\n  get subKeys(): List<KeyType> {\n    return this.get('subKeys');\n  }\n  get blocks(): List<Block> {\n    return this.get('blocks');\n  }\n  get relations() {\n    return this.get('relations');\n  }\n  get style() {\n    return this.get('style');\n  }\n\n  getBlock(type: string): { index: number; block: Block } {\n    const index = this.blocks.findIndex(b => b.type === type);\n    if (index === -1) return { index, block: null };\n    return { index, block: this.blocks.get(index) };\n  }\n\n  static fromJSON(obj) {\n    const {\n      key,\n      parentKey = null,\n      blocks,\n      subKeys = [],\n      collapse = false\n    } = obj;\n    return new Topic({\n      key,\n      parentKey,\n      collapse,\n      subKeys: List(subKeys),\n      blocks: Block.createList(blocks)\n    });\n  }\n\n  static create({\n    key,\n    parentKey = null,\n    content = '',\n    subKeys = [],\n    collapse = false\n  }: CreateTopicArg): Topic {\n    const block = Block.create({\n      type: BlockType.CONTENT,\n      data: content,\n      key: null\n    });\n    const blocks = List([block]);\n    return new Topic({\n      key,\n      parentKey,\n      blocks,\n      subKeys: List(subKeys),\n      collapse\n    });\n  }\n}\n","import { KeyPath, KeyType, TopicRelationship } from '../../types';\nimport { Model } from '../model';\n\nexport function getAllSubTopicKeys(model: Model, topicKey: KeyType): KeyType[] {\n  const item = model.getTopic(topicKey);\n\n  let res = [];\n  if (item.subKeys.size > 0) {\n    const subKeys = item.subKeys.toArray();\n    res.push(...subKeys);\n    res = subKeys.reduce((acc, key) => {\n      acc.push(...getAllSubTopicKeys(model, key));\n      return acc;\n    }, res);\n  }\n  return res;\n}\n\nexport function getKeyPath(\n  model: Model,\n  topicKey: KeyType,\n  reverse: boolean = false\n): KeyPath {\n  const res = [topicKey];\n  let item = model.getTopic(topicKey);\n  while (item.parentKey) {\n    reverse ? res.push(item.parentKey) : res.unshift(item.parentKey);\n    item = model.getParentTopic(item.key);\n  }\n  return res;\n}\n\nexport function getRelationship(\n  model: Model,\n  srcKey: KeyType,\n  dstKey: KeyType\n): string {\n  const srcTopic = model.getTopic(srcKey);\n  const dstTopic = model.getTopic(dstKey);\n  if (srcTopic && dstTopic) {\n    if (srcTopic.parentKey == dstTopic.parentKey)\n      return TopicRelationship.SIBLING;\n    let pTopic = srcTopic;\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === dstTopic.key)\n        return TopicRelationship.DESCENDANT;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n    pTopic = dstTopic;\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === srcTopic.key) return TopicRelationship.ANCESTOR;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n  }\n  return TopicRelationship.NONE;\n}\n","import debug from 'debug';\nimport { FocusMode, TopicRelationship } from '../../types';\nimport { createKey } from '../../utils';\nimport { Block } from '../block';\nimport { Topic } from '../topic';\nimport { getAllSubTopicKeys, getKeyPath, getRelationship } from '../utils';\nimport {\n  BaseModifierArg,\n  DeleteBlockArg,\n  ModifierResult,\n  SetBlockDataArg,\n  SetFocusModeArg,\n  SetLayoutDirArg,\n  SetThemeArg,\n  SetTopicStyleArg,\n  SetZoomFactorArg\n} from './types';\n\nconst log = debug('modifier');\n\nfunction toggleCollapse({ model, topicKey }: BaseModifierArg): ModifierResult {\n  let topic = model.getTopic(topicKey);\n  if (topic && topic.subKeys.size !== 0) {\n    topic = topic.merge({\n      collapse: !topic.collapse\n    });\n    model = model.updateIn(\n      ['topics', topic.key, 'collapse'],\n      collapse => !collapse\n    );\n  }\n  model = focusTopic({ model, topicKey, focusMode: FocusMode.NORMAL });\n  return model;\n}\n\nfunction collapseAll({ model }: BaseModifierArg): ModifierResult {\n  log('collapseAll');\n  const topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log(model);\n  model = model.withMutations(m => {\n    topicKeys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], true);\n    });\n  });\n  log(model);\n  return model;\n}\n\nfunction expandAll({ model }: BaseModifierArg): ModifierResult {\n  const topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log(model);\n  model = model.withMutations(m => {\n    topicKeys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  log(model);\n  return model;\n}\n\nfunction expandTo({ model, topicKey }: BaseModifierArg): ModifierResult {\n  const keys = getKeyPath(model, topicKey).filter(t => t !== topicKey);\n  model = model.withMutations(m => {\n    keys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  // 要让这个节点在视口中可见\n  if (\n    getRelationship(model, topicKey, model.editorRootTopicKey) !==\n    TopicRelationship.DESCENDANT\n  ) {\n    model = model.set('editorRootTopicKey', model.rootTopicKey);\n  }\n  return model;\n}\n\nfunction focusTopic({\n  model,\n  topicKey,\n  focusMode\n}: SetFocusModeArg): ModifierResult {\n  log('focus topic');\n  if (topicKey !== model.focusKey) model = model.set('focusKey', topicKey);\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction setFocusMode({ model, focusMode }: SetFocusModeArg): ModifierResult {\n  log('setFocusMode');\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction addChild({ model, topicKey }: BaseModifierArg): ModifierResult {\n  log('addChild:', topicKey);\n  let topic = model.getTopic(topicKey);\n  if (topic) {\n    const child = Topic.create({ key: createKey(), parentKey: topic.key });\n    topic = topic\n      .set('collapse', false)\n      .update('subKeys', subKeys => subKeys.push(child.key));\n    model = model.update('topics', topics =>\n      topics.set(topicKey, topic).set(child.key, child)\n    );\n    return focusTopic({\n      model,\n      topicKey: child.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n  return model;\n}\n\nfunction addSibling({ model, topicKey }: BaseModifierArg): ModifierResult {\n  if (topicKey === model.rootTopicKey) return model;\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const pItem = model.getTopic(topic.parentKey);\n    const idx = pItem.subKeys.indexOf(topicKey);\n    const sibling = Topic.create({ key: createKey(), parentKey: pItem.key });\n    model = model\n      .update('topics', topics => topics.set(sibling.key, sibling))\n      .updateIn(['topics', pItem.key, 'subKeys'], subKeys =>\n        subKeys.insert(idx + 1, sibling.key)\n      );\n    return focusTopic({\n      model,\n      topicKey: sibling.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n  return model;\n}\n\nfunction deleteTopic({ model, topicKey }: BaseModifierArg): ModifierResult {\n  if (topicKey === model.editorRootTopicKey) return model;\n  const item = model.getTopic(topicKey);\n  if (item) {\n    model = model.withMutations(m => {\n      m.update('topics', topics => {\n        topics = topics.delete(topicKey);\n        const deleteKeys = getAllSubTopicKeys(model, topicKey);\n        topics = topics.withMutations(t => {\n          deleteKeys.forEach(dKey => {\n            t.delete(dKey);\n          });\n        });\n        return topics;\n      });\n      m.updateIn(['topics', item.parentKey, 'subKeys'], subKeys =>\n        subKeys.delete(subKeys.indexOf(topicKey))\n      );\n      if (m.focusKey === topicKey)\n        m.set('focusKey', null).set('focusMode', null);\n    });\n  }\n\n  return model;\n}\n\n/**\n * setBlockData of one topic\n * @param model\n * @param topicKey\n * @param blockType\n * @param focusMode\n * @param data\n */\nfunction setBlockData({\n  model,\n  topicKey,\n  blockType,\n  focusMode,\n  data\n}: SetBlockDataArg): ModifierResult {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const { index, block } = topic.getBlock(blockType);\n    if (index === -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], blocks =>\n        blocks.push(\n          Block.create({\n            type: blockType,\n            data: data\n          })\n        )\n      );\n    } else {\n      if (block.data !== data) {\n        model = model.updateIn(\n          ['topics', topicKey, 'blocks', index, 'data'],\n          dt => data\n        );\n      }\n    }\n    if (focusMode) {\n      model = focusTopic({\n        model,\n        topicKey,\n        focusMode\n      });\n    }\n  }\n  return model;\n}\n\nfunction deleteBlock({ model, topicKey, blockType }: DeleteBlockArg) {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const { index } = topic.getBlock(blockType);\n    if (index !== -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], blocks =>\n        blocks.delete(index)\n      );\n    }\n    model = focusTopic({\n      model,\n      topicKey: null,\n      focusMode: null\n    });\n  }\n  return model;\n}\n\nfunction setStyle({\n  model,\n  topicKey,\n  style\n}: SetTopicStyleArg): ModifierResult {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    if (style !== topic.style) {\n      model = model.updateIn(['topics', topicKey, 'style'], s => style);\n    }\n  }\n  return model;\n}\n\nfunction setTheme({ model, theme }: SetThemeArg): ModifierResult {\n  model = model.setIn(['config', 'theme'], theme);\n  return model;\n}\n\nfunction setLayoutDir({ model, layoutDir }: SetLayoutDirArg): ModifierResult {\n  if (model.config.layoutDir === layoutDir) return model;\n  model = model.setIn(['config', 'layoutDir'], layoutDir);\n  return model;\n}\n\nfunction setEditorRootTopicKey({\n  model,\n  topicKey\n}: BaseModifierArg): ModifierResult {\n  if (model.editorRootTopicKey !== topicKey)\n    model = model.set('editorRootTopicKey', topicKey);\n  if (model.getTopic(topicKey).collapse)\n    model = model.setIn(['topics', topicKey, 'collapse'], false);\n  return model;\n}\n\nfunction setZoomFactor({\n  model,\n  zoomFactor\n}: SetZoomFactorArg): ModifierResult {\n  if (model.zoomFactor !== zoomFactor)\n    model = model.set('zoomFactor', zoomFactor);\n  return model;\n}\n\nexport default {\n  addChild,\n  addSibling,\n  toggleCollapse,\n  collapseAll,\n  expandAll,\n  expandTo,\n  focusTopic,\n  setFocusMode,\n  deleteTopic,\n  setBlockData,\n  deleteBlock,\n  setStyle,\n  setTheme,\n  setLayoutDir,\n  setEditorRootTopicKey,\n  setZoomFactor\n};\n","export type LinkStyle = {\n  lineType?: string;\n  lineWidth?: string;\n  lineColor?: string;\n  lineRadius?: number;\n};\n\nexport type TopicContentStyle = {\n  background?: string;\n  color?: string;\n  fontSize?: string;\n  lineHeight?: string;\n  borderRadius?: string;\n  borderWidth?: string;\n  borderStyle?: string;\n  borderColor?: string;\n  padding?: string;\n};\n\nexport type TopicStyle = {\n  contentStyle?: TopicContentStyle;\n  linkStyle?: LinkStyle;\n  subLinkStyle?: LinkStyle;\n};\n\nexport type ThemeType = {\n  name: string;\n  background: string;\n  highlightColor: string;\n  randomColor?: boolean;\n  marginH: number;\n  marginV: number;\n\n  contentStyle?: TopicContentStyle;\n  linkStyle?: LinkStyle;\n\n  rootTopic?: TopicStyle;\n  primaryTopic?: TopicStyle;\n  normalTopic?: TopicStyle;\n};\n\nexport function isThemeType(obj: any): boolean {\n  return (\n    obj.name != null && obj.background != null && obj.highlightColor != null\n  );\n}\n\nexport interface Themes {\n  [fieldName: string]: ThemeType;\n}\n","import { ThemeType } from './types';\n\nexport const defaultTheme: ThemeType = {\n  name: 'default',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: '3px'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      fontSize: '34px',\n      borderRadius: '35px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '10px 15px 10px 15px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      border: '1px solid #e8eaec',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '4px 10px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'white'\n    }\n  }\n};\n","import { Record } from 'immutable';\nimport { defaultTheme, ThemeType } from '../configs/theme';\nimport { DiagramLayoutType } from '../types';\n\ntype ConfigRecordType = {\n  readOnly?: boolean;\n  allowUndo?: boolean;\n  layoutDir?: DiagramLayoutType;\n  theme?: ThemeType;\n};\n\nconst defaultConfigRecord: ConfigRecordType = {\n  readOnly: false,\n  allowUndo: true,\n  layoutDir: DiagramLayoutType.LEFT_AND_RIGHT,\n  theme: defaultTheme\n};\n\nexport class Config extends Record(defaultConfigRecord) {\n  get layoutDir(): DiagramLayoutType {\n    return this.get('layoutDir');\n  }\n\n  get readOnly(): boolean {\n    return this.get('readOnly');\n  }\n\n  get allowUndo(): boolean {\n    return this.get('allowUndo');\n  }\n\n  get theme(): ThemeType {\n    return this.get('theme');\n  }\n\n  static fromJSON(obj) {\n    return new Config(obj);\n  }\n}\n","import { Map, Record } from 'immutable';\nimport isPlainObject from 'is-plain-object';\nimport { FocusMode, KeyType } from '../types';\nimport { createKey } from '../utils';\nimport { Config } from './config';\nimport { Topic } from './topic';\n\nexport type ExtData = Map<string, any>;\n\ntype ModelRecordType = {\n  topics: Map<KeyType, Topic>;\n  extData: ExtData; //用于插件做数据扩展\n  config: Config;\n  rootTopicKey: KeyType;\n  editorRootTopicKey?: KeyType;\n  focusKey?: KeyType;\n  focusMode?: string;\n  zoomFactor: number;\n  formatVersion?: string;\n};\n\nconst defaultModelRecord: ModelRecordType = {\n  topics: Map(),\n  extData: Map(),\n  config: null,\n  rootTopicKey: null,\n  editorRootTopicKey: null,\n  focusKey: null,\n  focusMode: null,\n  formatVersion: null,\n  zoomFactor: 1\n};\n\nexport class Model extends Record(defaultModelRecord) {\n  static isModel(obj) {\n    return obj instanceof Model;\n  }\n  static create(attrs: any = null): Model {\n    if (attrs == null) return Model.createEmpty();\n    let res: Model;\n    if (Model.isModel(attrs)) {\n      res = attrs;\n    }\n\n    if (isPlainObject(attrs)) {\n      res = Model.fromJSON(attrs);\n    }\n    if (res) {\n      if (res.focusKey == null) {\n        res = res.set('focusKey', res.rootTopicKey);\n      }\n      if (res.focusMode == null) {\n        res = res.set('focusMode', FocusMode.NORMAL);\n      }\n      return res;\n    }\n\n    throw new Error(\n      `\\`Value.create\\` only accepts objects or values, but you passed it: ${attrs}`\n    );\n  }\n\n  static createEmpty(): Model {\n    const model = new Model();\n    const rootTopic = Topic.create({ key: createKey() });\n    return model\n      .update('topics', topics => topics.set(rootTopic.key, rootTopic))\n      .set('rootTopicKey', rootTopic.key)\n      .set('focusKey', rootTopic.key)\n      .set('focusMode', FocusMode.NORMAL);\n  }\n\n  static fromJSON(object) {\n    let model = new Model();\n    const { topics = [], config = {}, rootTopicKey } = object;\n    let { editorRootTopicKey } = object;\n\n    if (editorRootTopicKey === undefined) editorRootTopicKey = rootTopicKey;\n\n    model = model.merge({\n      rootTopicKey,\n      editorRootTopicKey\n    });\n\n    model = model.withMutations(model => {\n      topics.forEach(topic => {\n        model.update('topics', topics =>\n          topics.set(topic.key, Topic.fromJSON(topic))\n        );\n      });\n      model.set('config', Config.fromJSON(config));\n    });\n\n    return model;\n  }\n\n  toJS() {\n    const obj = {\n      rootTopicKey: this.rootTopicKey,\n      topics: Object.values(this.topics.toJS()),\n      config: this.config,\n      extData: this.extData,\n      zoomFactor: this.zoomFactor\n    };\n    return obj;\n  }\n\n  get extData(): Map<string, any> {\n    return this.get('extData');\n  }\n\n  get topics(): Map<KeyType, Topic> {\n    return this.get('topics');\n  }\n\n  get config(): Config {\n    return this.get('config');\n  }\n\n  get formatVersion(): string {\n    return this.get('formatVersion');\n  }\n\n  get rootTopicKey(): KeyType {\n    return this.get('rootTopicKey');\n  }\n\n  get editorRootTopicKey(): KeyType {\n    return this.get('editorRootTopicKey');\n  }\n\n  get focusKey(): KeyType {\n    return this.get('focusKey');\n  }\n\n  get focusMode(): KeyType {\n    return this.get('focusMode');\n  }\n\n  get editingContentKey(): KeyType {\n    return this.focusMode === FocusMode.EDITING_CONTENT ? this.focusKey : null;\n  }\n\n  get editingDescKey(): KeyType {\n    return this.focusMode === FocusMode.EDITING_DESC ? this.focusKey : null;\n  }\n\n  getTopic(key: KeyType): Topic {\n    return this.topics.get(key);\n  }\n\n  getExtDataItem<T>(key: string, c: new () => T): any {\n    return this.extData.get(key) || new c();\n  }\n\n  getParentTopic(key: KeyType): Topic {\n    const topic = this.getTopic(key);\n    return topic.parentKey ? this.getTopic(topic.parentKey) : null;\n  }\n\n  getTopicVisualLevel(key: KeyType): number {\n    let topic = this.getTopic(key);\n    let level = 0;\n    while (topic && topic.key !== this.editorRootTopicKey) {\n      level++;\n      topic = this.getParentTopic(topic.key);\n    }\n    return level;\n  }\n\n  get rootTopic() {\n    return this.getTopic(this.rootTopicKey);\n  }\n\n  get zoomFactor() {\n    return this.get('zoomFactor');\n  }\n}\n"],"names":["DiagramLayoutType","List","Record","log","Map"],"mappings":"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"}